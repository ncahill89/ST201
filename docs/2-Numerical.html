<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Prof.&nbsp;Niamh Cahill (she/her)">

<title>ST201 Data Analysis – Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body>

<div id="quarto-search-results"></div>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#watt-test-challenge-7-rounds" id="toc-watt-test-challenge-7-rounds" class="nav-link active" data-scroll-target="#watt-test-challenge-7-rounds"><strong>🚴 Watt Test Challenge: 7 Rounds! 🚴</strong></a></li>
  <li><a href="#the-average-mean" id="toc-the-average-mean" class="nav-link" data-scroll-target="#the-average-mean">The Average (Mean)</a></li>
  <li><a href="#visualisation---dot-plots" id="toc-visualisation---dot-plots" class="nav-link" data-scroll-target="#visualisation---dot-plots">Visualisation - Dot plots</a></li>
  <li><a href="#visualisation---dot-plots-1" id="toc-visualisation---dot-plots-1" class="nav-link" data-scroll-target="#visualisation---dot-plots-1">Visualisation - Dot plots</a></li>
  <li><a href="#visualisation---dot-plots-2" id="toc-visualisation---dot-plots-2" class="nav-link" data-scroll-target="#visualisation---dot-plots-2">Visualisation - Dot plots</a></li>
  <li><a href="#visualisation---dot-plots-3" id="toc-visualisation---dot-plots-3" class="nav-link" data-scroll-target="#visualisation---dot-plots-3">Visualisation - Dot plots</a></li>
  <li><a href="#scatter-plots" id="toc-scatter-plots" class="nav-link" data-scroll-target="#scatter-plots">Scatter Plots</a></li>
  <li><a href="#scatter-plots-1" id="toc-scatter-plots-1" class="nav-link" data-scroll-target="#scatter-plots-1">Scatter Plots</a></li>
  <li><a href="#scatter-plots-2" id="toc-scatter-plots-2" class="nav-link" data-scroll-target="#scatter-plots-2">Scatter Plots</a></li>
  <li><a href="#scatter-plots-3" id="toc-scatter-plots-3" class="nav-link" data-scroll-target="#scatter-plots-3">Scatter Plots</a></li>
  <li><a href="#scatter-plots-4" id="toc-scatter-plots-4" class="nav-link" data-scroll-target="#scatter-plots-4">Scatter Plots</a></li>
  <li><a href="#scatter-plots-5" id="toc-scatter-plots-5" class="nav-link" data-scroll-target="#scatter-plots-5">Scatter Plots</a></li>
  <li><a href="#example---loan-interest-rates" id="toc-example---loan-interest-rates" class="nav-link" data-scroll-target="#example---loan-interest-rates">Example - Loan Interest Rates</a></li>
  <li><a href="#example---loan-interest-rates-1" id="toc-example---loan-interest-rates-1" class="nav-link" data-scroll-target="#example---loan-interest-rates-1">Example - Loan Interest Rates</a></li>
  <li><a href="#mean-of-loan-interest-rates" id="toc-mean-of-loan-interest-rates" class="nav-link" data-scroll-target="#mean-of-loan-interest-rates">Mean of Loan Interest Rates</a></li>
  <li><a href="#median---loan-interest-rates" id="toc-median---loan-interest-rates" class="nav-link" data-scroll-target="#median---loan-interest-rates">Median - Loan Interest Rates</a></li>
  <li><a href="#median---loan-interest-rates-1" id="toc-median---loan-interest-rates-1" class="nav-link" data-scroll-target="#median---loan-interest-rates-1">Median - Loan Interest Rates</a></li>
  <li><a href="#quantiles" id="toc-quantiles" class="nav-link" data-scroll-target="#quantiles">Quantiles</a></li>
  <li><a href="#quantiles-1" id="toc-quantiles-1" class="nav-link" data-scroll-target="#quantiles-1">Quantiles</a></li>
  <li><a href="#measures-of-dispersion---range" id="toc-measures-of-dispersion---range" class="nav-link" data-scroll-target="#measures-of-dispersion---range">Measures of Dispersion - Range</a></li>
  <li><a href="#boxplots" id="toc-boxplots" class="nav-link" data-scroll-target="#boxplots">Boxplots</a></li>
  <li><a href="#measures-of-dispersion---variance" id="toc-measures-of-dispersion---variance" class="nav-link" data-scroll-target="#measures-of-dispersion---variance">Measures of Dispersion - Variance</a></li>
  <li><a href="#changing-variancesstandard-deviations" id="toc-changing-variancesstandard-deviations" class="nav-link" data-scroll-target="#changing-variancesstandard-deviations">Changing variances/standard deviations</a></li>
  <li><a href="#changing-variancesstandard-deviations-1" id="toc-changing-variancesstandard-deviations-1" class="nav-link" data-scroll-target="#changing-variancesstandard-deviations-1">Changing variances/standard deviations</a></li>
  <li><a href="#robust-statistics---mean-vs-median" id="toc-robust-statistics---mean-vs-median" class="nav-link" data-scroll-target="#robust-statistics---mean-vs-median">Robust statistics - Mean vs Median</a></li>
  <li><a href="#robust-statistics---mean-vs-median-1" id="toc-robust-statistics---mean-vs-median-1" class="nav-link" data-scroll-target="#robust-statistics---mean-vs-median-1">Robust statistics - Mean vs Median</a></li>
  <li><a href="#scatterplots-for-paired-data" id="toc-scatterplots-for-paired-data" class="nav-link" data-scroll-target="#scatterplots-for-paired-data">Scatterplots for paired data</a></li>
  <li><a href="#scatterplots-for-paired-data-1" id="toc-scatterplots-for-paired-data-1" class="nav-link" data-scroll-target="#scatterplots-for-paired-data-1">Scatterplots for paired data</a>
  <ul class="collapse">
  <li><a href="#loan-amount-vs-income" id="toc-loan-amount-vs-income" class="nav-link" data-scroll-target="#loan-amount-vs-income">Loan amount vs Income</a></li>
  </ul></li>
  <li><a href="#scatterplots-for-paired-data-2" id="toc-scatterplots-for-paired-data-2" class="nav-link" data-scroll-target="#scatterplots-for-paired-data-2">Scatterplots for paired data</a>
  <ul class="collapse">
  <li><a href="#interest-rates-vs-income" id="toc-interest-rates-vs-income" class="nav-link" data-scroll-target="#interest-rates-vs-income">Interest rates vs Income</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="2-Numerical.html"><i class="bi bi-file-slides"></i>RevealJS</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">ST201 Data Analysis</h1>
<p class="subtitle lead">Numerical Data</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Prof.&nbsp;Niamh Cahill (she/her) </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="watt-test-challenge-7-rounds" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="watt-test-challenge-7-rounds"><strong>🚴 Watt Test Challenge: 7 Rounds! 🚴</strong></h2>
<p><img src="images/Concept2-BikeERG-Exercise-Bike.jpg" class="img-fluid"></p>
<p><strong>🏋️‍♂️ Goal:</strong> Achieve an <strong>average</strong> of 160 watts</p>
<p><strong>⏲️ Time:</strong> 2 minutes per round</p>
<p><strong>💡 Pro Tip:</strong> Adjust the resistance to push your wattage higher!</p>
</section>
<section id="the-average-mean" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="the-average-mean">The Average (Mean)</h2>
<p>The mean, often called the average, is a common way to measure the center of a distribution of data. For example, assume we have a watt value every second over a two minute period. To compute the mean watt value, we add up all the watt values and divide by 120.</p>
<div class="columns">
<div class="column" style="width:65%;">
<p><strong>The Sample Mean</strong></p>
<ul>
<li><strong>Description:</strong> a central value in a set of numbers.</li>
<li><strong>Formula:</strong> the sum of all values divided by the total number of values.</li>
</ul>
</div><div class="column" style="width:35%;">
<p><strong>Notation</strong></p>
<p><span class="math inline">\(\bar{x}\)</span></p>
<p><span class="math inline">\(\bar{x} = \frac{1}{n}\sum_{i=1}^n x_i\)</span></p>
</div>
</div>
<p>For the 🚴 Watt Test 🚴 we know what we want the mean to be e.g., 160.</p>
<p>🤔 Consider how many different ways we can generate that mean value in a two minute interval.</p>
<!-- The loans data represents a sample from a larger population of loans. We could compute a mean for the entire population in the same way as the sample mean. However, the population mean has a special label: $\mu$ -->
<!-- -   Oftentimes it is too expensive to measure the population mean precisely, so we often estimate $\mu$ using the sample mean $\bar{x}$ -->
</section>
<section id="visualisation---dot-plots" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="visualisation---dot-plots">Visualisation - Dot plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>A dot plot provides the most basic of displays when we are interested in the distribution of a single variable.</p>
<ul>
<li>A dot plot is a one-variable scatterplot;</li>
<li>an example using 120 watt values is shown:</li>
</ul>
</div><div class="column" style="width:55%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/stripchart_animation.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisation---dot-plots-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="visualisation---dot-plots-1">Visualisation - Dot plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>A dot plot provides the most basic of displays when we are interested in the distribution of a single variable.</p>
<ul>
<li>A dot plot is a one-variable scatterplot;</li>
<li>an example using 120 watt values is shown:</li>
</ul>
</div><div class="column" style="width:55%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="528"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="visualisation---dot-plots-2" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="visualisation---dot-plots-2">Visualisation - Dot plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>We could achieve a similar average in a different way:</p>
<p><img src="images/Concept2-BikeERG-Exercise-Bike.jpg" class="img-fluid"></p>
</div><div class="column" style="width:55%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/stripchart_animation2.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisation---dot-plots-3" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="visualisation---dot-plots-3">Visualisation - Dot plots</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>We could achieve a similar average in a different way:</p>
<p><img src="images/Concept2-BikeERG-Exercise-Bike.jpg" class="img-fluid"></p>
</div><div class="column" style="width:55%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="528"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scatter-plots" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots">Scatter Plots</h2>
<p>We could also consider visualising two variables here as a scatter plot if we include the time aspect.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a steady increase every 10 seconds</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/scatter_animation1.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatter-plots-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots-1">Scatter Plots</h2>
<p>We could also consider visualising two variables here as a scatter plot if we include the time aspect.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a steady increase every 10 seconds</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scatter-plots-2" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots-2">Scatter Plots</h2>
<p>We can change the strategy and still maintain the same average.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a longer period of 160 watts</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/scatter_animation2.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatter-plots-3" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots-3">Scatter Plots</h2>
<p>We can change the strategy and still maintain the same average.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a longer period of 160 watts</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scatter-plots-4" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots-4">Scatter Plots</h2>
<p>We can change the strategy and still maintain the same average.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a steady decrease every 10 seconds</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/scatter_animation3.gif" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatter-plots-5" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatter-plots-5">Scatter Plots</h2>
<p>We can change the strategy and still maintain the same average.</p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Consider the following strategy:</p>
<ul>
<li>get a 160 watt average in a 2 minute interval</li>
<li>have a steady decrease every 10 seconds</li>
</ul></li>
</ul>
</div><div class="column" style="width:45%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="example---loan-interest-rates" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="example---loan-interest-rates">Example - Loan Interest Rates</h2>
<p>A dot plot of the (rounded) loan interest rate data is shown below:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Dot Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">stripchart</span>(<span class="at">x=</span><span class="fu">round</span>(loan50<span class="sc">$</span>interest_rate), </span>
<span id="cb1-2"><a href="#cb1-2"></a>           <span class="at">method =</span> <span class="st">"stack"</span>, </span>
<span id="cb1-3"><a href="#cb1-3"></a>           <span class="at">at =</span> <span class="dv">0</span>, <span class="at">cex =</span> <span class="dv">2</span>,</span>
<span id="cb1-4"><a href="#cb1-4"></a>           <span class="at">col =</span> <span class="st">"steelblue"</span>,  <span class="at">pch =</span> <span class="dv">19</span>,</span>
<span id="cb1-5"><a href="#cb1-5"></a>           <span class="at">main =</span> <span class="st">""</span>, </span>
<span id="cb1-6"><a href="#cb1-6"></a>           <span class="at">xlab =</span> <span class="st">"Loan interest rates"</span>, </span>
<span id="cb1-7"><a href="#cb1-7"></a>           <span class="at">ylab=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="example---loan-interest-rates-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="example---loan-interest-rates-1">Example - Loan Interest Rates</h2>
<p>A histogram is a plot that shows the distribution of data by grouping values into bins and displaying their frequencies as bars. A histogram of the loan interest rate data is shown below:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Histogram</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">hist</span>(<span class="at">x=</span>loan50<span class="sc">$</span>interest_rate,</span>
<span id="cb2-2"><a href="#cb2-2"></a>     <span class="at">breaks =</span> <span class="dv">10</span>,</span>
<span id="cb2-3"><a href="#cb2-3"></a>     <span class="at">col =</span> <span class="st">"steelblue"</span>, </span>
<span id="cb2-4"><a href="#cb2-4"></a>     <span class="at">main =</span> <span class="st">""</span>,</span>
<span id="cb2-5"><a href="#cb2-5"></a>     <span class="at">xlab =</span> <span class="st">"Loan interest rates"</span>, </span>
<span id="cb2-6"><a href="#cb2-6"></a>     <span class="at">ylab=</span><span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="mean-of-loan-interest-rates" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="mean-of-loan-interest-rates">Mean of Loan Interest Rates</h2>
<p>When working with data we often have a <strong>sample</strong> from a larger population.</p>
<ul>
<li>We can calculate the <strong>mean</strong> for the sample: <span class="math inline">\(\bar{x}\)</span>.<br>
</li>
<li>But the mean of the <strong>entire population</strong> has a special label: <span class="math inline">\(\mu\)</span>.</li>
</ul>
<section id="why-dont-we-always-calculate-mu" class="level4">
<h4 class="anchored" data-anchor-id="why-dont-we-always-calculate-mu">Why don’t we always calculate <span class="math inline">\(\mu\)</span>?</h4>
<ul>
<li><strong>Often not feasible</strong> to measure the population mean precisely.</li>
<li>Instead, we estimate <span class="math inline">\(\mu\)</span> using the <strong>sample mean</strong> <span class="math inline">\(\bar{x}\)</span>.</li>
</ul>
</section>
<section id="loan-interest-rate-example" class="level4">
<h4 class="anchored" data-anchor-id="loan-interest-rate-example">Loan Interest Rate Example</h4>
<ul>
<li>From the sample of <strong>50 loans</strong>, the <strong>mean interest rate</strong> is <strong>11.57%</strong>.</li>
</ul>
<p><strong>Later</strong> we’ll explore how <strong>reliable</strong> <span class="math inline">\(\bar{x}\)</span> is for estimating <span class="math inline">\(\mu\)</span>!</p>
</section>
</section>
<section id="median---loan-interest-rates" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="median---loan-interest-rates">Median - Loan Interest Rates</h2>
<ul>
<li>The median is the value which divides the observations into two equal parts</li>
</ul>
<div class="columns">
<div class="column" style="width:40%;">
<p><strong>The Median</strong></p>
<ul>
<li><strong>Description:</strong> the 50th percentile.</li>
<li><strong>Formula:</strong> order the values and find the middle value</li>
</ul>
</div><div class="column" style="width:60%;">
<p><strong>Notation</strong></p>
<ul>
<li><span class="math inline">\(\tilde{x}^{(0.5)}\)</span></li>
<li><span class="math display">\[
\tilde{x}^{(0.5)} =
\begin{cases}
x_{(n+1)/2},&amp; \text{if n is odd}\\
\frac{1}{2}(x_{n/2} + x_{(n/2) + 1}), &amp; \text{if n is even}
\end{cases}\]</span></li>
</ul>
</div>
</div>
<ul>
<li>Consider 10 interest rates from the loan data and calculate the median</li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code> [1] 11 10 26 10  9 10 17  6  8 13</code></pre>
</div>
</div>
</section>
<section id="median---loan-interest-rates-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="median---loan-interest-rates-1">Median - Loan Interest Rates</h2>
<ul>
<li>Recall the ECDF? It shows the proportion of data points less than or equal to each value. Let’s look at it for the interest rate data and get an idea of where the median is.</li>
</ul>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">ECDF Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">plot.ecdf</span>(<span class="at">x=</span>loan50<span class="sc">$</span>interest_rate) </span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">abline</span>(<span class="at">h =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="quantiles" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="quantiles">Quantiles</h2>
<ul>
<li><p>Quantiles are a generalization of the idea of the median</p></li>
<li><p>A quantile partitions the data into proportions</p></li>
<li><p>In general a (<span class="math inline">\(\alpha \times 100\)</span>)% - quantile (percentile) splits the data such that at least (<span class="math inline">\(\alpha \times 100\)</span>)% of the values are <span class="math inline">\(\leq\)</span> the quantile value <span class="math inline">\(\tilde{x}^{(\alpha)}\)</span>.</p>
<p><span class="math display">\[
  \tilde{x}^{(\alpha)} =
\begin{cases}
  x_{(k)},&amp; \text{if } n\alpha \text{ is not an integer},
  \text{k = smallest integer &gt; } n\alpha\\
  \frac{1}{2}(x_{n\alpha} + x_{n\alpha + 1}), &amp; \text{if } n\alpha \text{ is an integer}
\end{cases}
\]</span></p></li>
</ul>
</section>
<section id="quantiles-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="quantiles-1">Quantiles</h2>
<ul>
<li>Let’s look at the ECDF for the interest rate data and get an idea of where the 80th percentile is.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<!-- ## Comparing quantiles -->
<!-- \footnotesize -->
<!--   - If we plot the quantiles of two variables against each other, we obtain a Quantile–Quantile plot (QQ-plot).  -->
<!-- - This provides a simple summary of whether the distributions -->
<!-- of the two variables are similar with respect to their location or not.   -->
<!-- - Lets look at a QQ-plot for two weather data sets -->
<!-- ```{r, fig.width=4, fig.height=3.5} -->
<!-- weather1 <- weather -->
<!-- weather2 <- runif(length(weather1), min(weather1), max(weather1)) -->
<!-- qqplot(weather1, weather2)  -->
<!-- lines(weather1, weather1)  -->
<!-- ``` -->
</section>
<section id="measures-of-dispersion---range" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="measures-of-dispersion---range">Measures of Dispersion - Range</h2>
<ul>
<li><p>The <strong>range</strong> is a measure of dispersion defined as the difference between the maximum and minimum value of the data.</p></li>
<li><p>The <strong>interquartile range</strong> is the difference between the 75% quantile (upper quartile) and 25% quantile (lower quartile).</p>
<ul>
<li>It covers the center of the data distribution and contains 50% of the observations.</li>
</ul>
<p><span class="math display">\[d_{Q} = \tilde{x}^{(0.75)} - \tilde{x}^{(0.25)}\]</span></p></li>
</ul>
</section>
<section id="boxplots" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="boxplots">Boxplots</h2>
<p>A boxplot is a graphical summary of data that shows its median, quartiles, spread, and potential outliers. Consider a boxplot of the interest rates.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Boxplot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">boxplot</span>(loan50<span class="sc">$</span>interest_rate,</span>
<span id="cb5-2"><a href="#cb5-2"></a>        <span class="at">ylab =</span> <span class="st">"Loan interest rates"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="measures-of-dispersion---variance" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="measures-of-dispersion---variance">Measures of Dispersion - Variance</h2>
<ul>
<li><p>Another measure of dispersion is the <strong>variance</strong>. The variance is one of the most important measures in statistics.</p>
<ul>
<li>This can be thought of as the mean of the squared errors</li>
</ul>
<p><span class="math display">\[s^2 = \frac{1}{n-1}\sum_{i = 1}^{n}(x_i - \bar{x})^2\]</span></p>
<ul>
<li><p>the variance of the interest rates in the loan dataset is 25.52</p>
<ul>
<li>the standard deviation, <span class="math inline">\(s\)</span>, is 5.05</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="changing-variancesstandard-deviations" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="changing-variancesstandard-deviations">Changing variances/standard deviations</h2>
<p>Which histogram has s = 5, 10, 15, 20</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="changing-variancesstandard-deviations-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="changing-variancesstandard-deviations-1">Changing variances/standard deviations</h2>
<p>Which boxplot has s = 5, 10, 15, 20</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<!-- ## Robust statistics - Mean vs Median {style="font-size: 80%;"} -->
</section>
<section id="robust-statistics---mean-vs-median" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="robust-statistics---mean-vs-median">Robust statistics - Mean vs Median</h2>
<ul>
<li>red = mean</li>
<li>green = median</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<!-- ## Robust statistics - Mean vs Median {style="font-size: 80%;"} -->
<!-- ```{r, fig.width=6, fig.height=4, fig.align='center'} -->
<!-- stripchart(loan2, method = "stack", at = 0, pch = 19, cex=2, -->
<!--            col = "steelblue", main = "", -->
<!--            xlab = "Loan interest rates", ylab="",xlim = c(5,45)) -->
<!-- ``` -->
</section>
<section id="robust-statistics---mean-vs-median-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="robust-statistics---mean-vs-median-1">Robust statistics - Mean vs Median</h2>
<ul>
<li>red = mean</li>
<li>green = median</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="scatterplots-for-paired-data" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatterplots-for-paired-data">Scatterplots for paired data</h2>
<p>A scatter plot is a chart that displays individual data points to show the relationship between two variables.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Scatterplot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Code</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">plot</span>(<span class="at">x=</span>loan50<span class="sc">$</span>loan_amount, </span>
<span id="cb6-2"><a href="#cb6-2"></a>     <span class="at">y=</span>loan50<span class="sc">$</span>interest_rate,</span>
<span id="cb6-3"><a href="#cb6-3"></a>     <span class="at">cex=</span><span class="dv">2</span>, </span>
<span id="cb6-4"><a href="#cb6-4"></a>     <span class="at">cex.lab =</span> <span class="fl">1.5</span>,</span>
<span id="cb6-5"><a href="#cb6-5"></a>     <span class="at">pch =</span> <span class="dv">19</span>, </span>
<span id="cb6-6"><a href="#cb6-6"></a>     <span class="at">col =</span> <span class="st">"steelblue"</span>,</span>
<span id="cb6-7"><a href="#cb6-7"></a>     <span class="at">xlab =</span> <span class="st">"Loan amount (thousands)"</span>, </span>
<span id="cb6-8"><a href="#cb6-8"></a>     <span class="at">ylab=</span><span class="st">"Interest rates (%)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="scatterplots-for-paired-data-1" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatterplots-for-paired-data-1">Scatterplots for paired data</h2>
<section id="loan-amount-vs-income" class="level3">
<h3 class="anchored" data-anchor-id="loan-amount-vs-income">Loan amount vs Income</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="scatterplots-for-paired-data-2" class="level2" style="font-size: 80%;">
<h2 style="font-size: 80%;" class="anchored" data-anchor-id="scatterplots-for-paired-data-2">Scatterplots for paired data</h2>
<section id="interest-rates-vs-income" class="level3">
<h3 class="anchored" data-anchor-id="interest-rates-vs-income">Interest rates vs Income</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="2-Numerical_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>